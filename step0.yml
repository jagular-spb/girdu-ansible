#
---
#- name: Play with Squid
#  hosts: squid
#  become: yes
#  become_method: sudo
#  gather_facts: yes
#  roles:
#    - resolv.conf
#    - common
#
#  tasks:
#    - name: Update yum cache
#      yum:
#        update_cache: yes

#    - name: Print all available facts
#      ansible.builtin.debug:
#        var: ansible_facts

#- name: playbook for starting and enabling the NetworkManager
#  hosts: squid1.anysrv.local
#  tasks:
#    - name: start the service
#      service:
#        name: NetworkManager
#        state: started
#        enabled: true

- name: playbook for configuring second interface
  hosts: squid1.anysrv.local
  become: yes
  become_method: sudo
  gather_facts: yes
  vars:
    target_mac: "52:54:00:fe:2f:b8"
    network_connection:
      - name: static-network
        type: ethernet
        mac: "{{ target_mac }}"
        state: up
        ip:
          dhcp: no
          address:
            - 192.168.0.5/24
  tasks:
    - name: Print all available facts
      ansible.builtin.debug:
        var: ansible_facts.network_connections

  roles:
    - rhel-system-roles.network

